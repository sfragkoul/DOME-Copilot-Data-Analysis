{
  "publication/title": "High-content, label-free analysis of proplatelet production from megakaryocytes.",
  "publication/authors": "French SL, Vijey P, Karhohs KW, Wilkie AR, Horin LJ, Ray A, Posorske B, Carpenter AE, Machlus KR, Italiano JE Jr",
  "publication/journal": "Journal of thrombosis and haemostasis : JTH",
  "publication/year": "2020",
  "publication/pmid": "32662223",
  "publication/pmcid": "PMC7988437",
  "publication/doi": "10.1111/jth.15012",
  "publication/tags": "- Megakaryocytes\n- Proplatelets\n- Machine Learning\n- Image Analysis\n- Cell Segmentation\n- Live-Cell Imaging\n- Platelet Production\n- Thrombocytopenia\n- Cell Morphology\n- High-Content Screening",
  "dataset/provenance": "The dataset used in our study was derived from live-cell imaging of megakaryocytes (MKs) and proplatelet structures. The imaging was performed using the IncuCyte\u00ae System, capturing phase-contrast images at 1-hour intervals from multiple regions per well over a 24-hour period. The MK cultures were adjusted to a cell density of 250-500 cells per well and plated in 96-well plates. The images were captured using 10x and 20x objectives for mouse and human MKs, respectively.\n\nThe dataset consists of 8-bit tiff stacks that capture the stages of MK differentiation and proplatelet formation. These images were used to train and validate our supervised machine learning algorithms. Specifically, we used approximately 15-20 labels of each classifier per image, focusing on variety and areas of ambiguity to ensure optimal results.\n\nThe dataset includes images of both mouse and human MKs. For human MKs, the cells were generated from cord blood CD34+ cells cultured in serum-free stem cell medium containing 70 ng/mL TPO. Mature human MKs were purified by magnetic bead separation on day 11.\n\nThe number of data points in our dataset is substantial, as it includes images captured over a 24-hour period from multiple regions per well. This provides a comprehensive view of the morphological changes that occur during MK maturation and proplatelet production.\n\nOur dataset has not been used in previous publications by our group or the community. However, the methods and tools we developed, such as the use of ilastik and CellProfiler, are based on open-source software that has been widely used in the scientific community. The code, ilastik files, and CellProfiler pipelines used in our study are available at https://github.com/broadinstitute/Italiano_MK_Analysis, allowing other researchers to replicate and build upon our work.",
  "dataset/splits": "Not enough information is available.",
  "dataset/redundancy": "Not enough information is available.",
  "dataset/availability": "The data and analytical tools developed for this study are publicly available to ensure reproducibility and accessibility. The code, ilastik files, and CellProfiler pipelines used in our analysis are hosted on GitHub at the following URL: https://github.com/broadinstitute/Italiano_MK_Analysis. This repository contains all the necessary resources for other researchers to replicate our findings and apply our methods to their own datasets.\n\nThe data itself, including the phase-contrast images of megakaryocytes (MKs) and proplatelet structures, were captured using the IncuCyte\u00ae System. These images were processed through a series of supervised machine learning steps using ilastik and CellProfiler, as detailed in our methodology. The probability maps and segmented images generated by these tools are integral to our analysis and are also available through the GitHub repository.\n\nTo enforce the proper use and citation of our data, we have included a license in the repository. This license specifies the terms under which the data and tools can be used, ensuring that any derivative work acknowledges the original source. By making our data and methods publicly available, we aim to foster collaboration and advance the field of proplatelet quantification. This approach not only promotes transparency but also provides a standardized method for researchers to analyze MK and proplatelet production, thereby enhancing the reproducibility of scientific findings.",
  "optimization/algorithm": "The machine-learning algorithm class used in our study is supervised learning. We employed this approach to accurately identify and segment complex proplatelet structures in images of megakaryocytes (MKs). The algorithm is not entirely new; it builds upon existing tools and techniques, specifically leveraging open-source software like ilastik and CellProfiler. These tools are well-established in the field of image analysis and have been adapted for our specific needs.\n\nThe reason this algorithm was not published in a machine-learning journal is that the primary focus of our work is on biological research, specifically the study of MK maturation and proplatelet production. The machine-learning components are integral to our methodology but are secondary to the biological insights we aim to provide. Our goal is to offer a practical, user-friendly tool for researchers in the field of hematology and thrombocytopenia, rather than to contribute novel machine-learning techniques. The algorithm's effectiveness has been validated through extensive testing and comparison with traditional methods, ensuring its reliability for biological applications.",
  "optimization/meta": "The model described in this publication does not function as a meta-predictor. Instead, it employs a two-step supervised machine learning approach to accurately identify complex proplatelet objects in images. The initial step involves using ilastik for generating probability maps of cellular features from phase contrast images. These maps are then processed in CellProfiler to identify a potential pool of megakaryocytes (MKs) and proplatelet structures. The second step involves a further round of machine learning at the object level using CellProfiler Analyst. This workflow produces segmented and overlaid images, allowing for the monitoring of object classification accuracy throughout the analysis stages.\n\nThe machine learning algorithms used in this process are ilastik and CellProfiler Analyst. Ilastik is utilized for pixel-level classification to generate probability maps, while CellProfiler Analyst is employed for object-level classification to distinguish between true MKs and proplatelet structures. The training data for these algorithms is derived from manually annotated images, ensuring that the data is independent and specifically tailored to the task of identifying MK maturation stages.\n\nThe internal validation of the machine learning algorithms within CellProfiler involves comparing the predictions to manually classified events. This validation step ensures that the algorithms accurately segment the stages of MK maturation. Additionally, confusion matrices generated from expert annotations provide further validation by showing the percentages of predicted versus true labels. This approach ensures that the training data is independent and that the model's performance is rigorously evaluated.",
  "optimization/encoding": "In our study, we employed a supervised machine learning approach to accurately identify and segment complex proplatelet structures in images. The data encoding and preprocessing involved several key steps to ensure the algorithm's effectiveness.\n\nInitially, phase-contrast images of mature megakaryocytes (MKs) were captured over a 24-hour period, during which these cells underwent morphological changes indicative of proplatelet production. These images were 8-bit, single-channel grayscale images, providing a clear representation of the cellular structures.\n\nThe preprocessing pipeline began with two rounds of supervised machine learning using ilastik, a user-friendly software for interactive image classification. In the first round, pixels were classified into categories such as background gray, background near cell, white pixels, gray pixels, and black pixels. This step helped in distinguishing the general cellular features from the background.\n\nIn the second round, a more refined classification was performed, where pixels were categorized as background, cell boundary, cell, and protrusion. This detailed classification generated probability maps that highlighted the different components of the MKs and proplatelet structures.\n\nThese probability maps were then fed into CellProfiler, another open-source software for image analysis. CellProfiler processed the maps to identify a potential pool of MKs and proplatelet structures. To ensure accuracy, the images underwent a second round of machine learning at the object level using CellProfiler Analyst. This step involved creating text rules based on a preliminary understanding of the cellular objects, which were then used to filter and segment genuine MKs and proplatelets accurately.\n\nThe filtering process included metrics such as solidity (less than 0.8) and size exclusion based on diameter, major axis length, and Zernike features. This ensured that only relevant structures were considered for further analysis.\n\nAdditionally, a skeletonization pipeline was developed to gain more in-depth information about proplatelet structures. This pipeline converted identified proplatelet objects into skeletonized structures, composed of nodes (vertices) linked by line segments (edges). The output provided tabulated information on statistical features of each skeletonized object, allowing for the quantitation of proplatelet lengths and detailed visualization of spatial distributions over the differentiation timeline.\n\nThe entire workflow was automated using Python programming, with the code, ilastik files, and CellProfiler pipelines available for public access. This automation ensured consistency and reproducibility in the data encoding and preprocessing steps, making the analysis platform user-friendly and unbiased.",
  "optimization/parameters": "In our study, the number of parameters used in the model was determined through a two-step supervised machine learning approach. Initially, we utilized ilastik for pixel-level classification, where we annotated training images to classify pixels into categories such as background, cell boundary, megakaryocyte (MK), and proplatelet. This process involved creating probability maps for each image, which were then processed in CellProfiler to identify cellular objects.\n\nThe second step involved object-level classification using CellProfiler Analyst. Here, we labeled 50 cells from each category (MK or proplatelet) as either positive or negative to improve the recognition of complex proplatelet structures. This step was crucial for refining the model's ability to accurately segment and classify the different stages of MK maturation.\n\nThe selection of parameters was guided by the need for high accuracy and flexibility. We found that approximately 15-20 labels of each classifier per image, with a focus on variety and areas of ambiguity, provided optimal results. This approach ensured that the model could handle the complex morphological variations in MK shapes and the intricacies of branched, overlapping proplatelet structures.\n\nAdditionally, the use of open-source Python algorithms allowed for a high level of flexibility, permitting high-content and high-throughput quantification. This implementation was essential for standardizing proplatelet quantification in the field and increasing researcher capability for analyzing proplatelet production.",
  "optimization/features": "The input features for our machine learning pipeline are derived from phase-contrast images of megakaryocytes (MKs) and their proplatelet structures. Initially, the images are processed to generate probability maps using ilastik, which classifies pixels into categories such as background, cell boundary, MK, and proplatelet. These probability maps are then fed into CellProfiler, where various features are extracted to identify and segment cellular objects.\n\nFeature selection is an integral part of our workflow. During the training phase, expert annotations are used to label pixels and objects, ensuring that the most relevant features are highlighted. This process involves two stages of supervised machine learning: the first at the pixel level in ilastik and the second at the object level in CellProfiler Analyst. The feature selection is performed using the training set only, ensuring that the model generalizes well to unseen data.\n\nThe specific number of features (f) used as input can vary depending on the complexity of the images and the stages of MK maturation being analyzed. However, the pipeline is designed to be flexible, allowing for the inclusion of a diverse set of features that capture the morphological changes and structural details of MKs and proplatelets. This approach ensures that the model can accurately segment and classify the different stages of MK maturation.",
  "optimization/fitting": "Not applicable.",
  "optimization/regularization": "In our study, we implemented several techniques to prevent overfitting and ensure the robustness of our machine learning models. One key approach was the use of cross-validation, where we divided our dataset into training and validation sets. This allowed us to train our models on one subset of the data and validate their performance on another, unseen subset, thereby reducing the risk of overfitting to the training data.\n\nAdditionally, we employed regularization techniques within our machine learning pipelines. For instance, in ilastik, we carefully annotated a diverse set of training images, focusing on areas of ambiguity to improve the model's generalization capabilities. We also ensured that the probability maps generated at each step were checked for overfitting, adjusting the annotations as necessary to maintain a balanced and representative training set.\n\nIn CellProfiler, we utilized object-level classification to further refine our models. By training on a subset of manually annotated cells, we were able to create more accurate and generalizable rules for identifying proplatelet structures. This two-step supervised machine learning approach\u2014first at the pixel level and then at the object level\u2014helped to mitigate overfitting by ensuring that our models could accurately segment and classify complex morphological features across different images.\n\nFurthermore, we incorporated internal quality control checkpoints within both ilastik and CellProfiler. These checkpoints, such as uncertainty values in ilastik and confusion matrices in CellProfiler Analyst, allowed us to continuously monitor and validate the performance of our models. By doing so, we could identify and address any potential overfitting issues early in the analysis process.\n\nOverall, these regularization methods and validation techniques were integral to our workflow, ensuring that our supervised machine learning algorithms accurately and reliably segmented stages of megakaryocyte maturation and proplatelet formation.",
  "optimization/config": "The hyper-parameter configurations, optimization schedule, model files, and optimization parameters used in our study are indeed available. All relevant resources, including the code, ilastik files, and CellProfiler pipelines, have been made publicly accessible. These materials can be found on GitHub at the following URL: https://github.com/broadinstitute/Italiano_MK_Analysis. The repository contains detailed information on the configurations and parameters employed during the optimization process, ensuring transparency and reproducibility. The license under which these resources are shared allows for open access and use, facilitating further research and development in the field. This availability supports the broader scientific community in validating and building upon our findings.",
  "model/interpretability": "The model employed in our study is not a black box but rather a transparent and interpretable system. We utilized a two-step supervised machine learning approach that leverages open-source tools, specifically ilastik and CellProfiler, to segment and classify megakaryocytes (MKs) and proplatelet structures in phase-contrast images.\n\nIn the first step, ilastik was used to generate probability maps based on pixel intensities. This process involved expert annotation to classify pixels into categories such as background, cell boundary, MK, and proplatelet. The probability maps produced by ilastik are visual representations that clearly show the likelihood of each pixel belonging to a specific class, making the decision-making process transparent.\n\nThe second step involved processing these probability maps through a CellProfiler pipeline. This pipeline identified cellular objects within the images and further refined the classification using CellProfiler Analyst. During this stage, an expert labeled 50 cells from each category (MK or proplatelet) as either positive or negative to improve the recognition of complex proplatelet structures. This manual intervention ensures that the model's decisions are grounded in human expertise and are easily interpretable.\n\nAdditionally, the workflow includes multiple checkpoints for internal quality control. For instance, ilastik provides uncertainty values that indicate the confidence level of each pixel classification. CellProfiler Analyst generates confusion matrices that compare predicted versus true labels, offering a clear view of the model's performance. Furthermore, CellProfiler produces masked overlays of all objects within the image, allowing for direct visualization and manual validation at every stage.\n\nThe skeletonization pipeline is another example of the model's transparency. It converts identified proplatelet objects into skeletonized structures composed of nodes and edges, providing detailed statistical features of each object. This allows for the quantitation of proplatelet lengths and spatial distributions, offering deep insights into the morphological changes during MK maturation.\n\nOverall, the combination of visual probability maps, expert annotations, confusion matrices, and skeletonized structures ensures that the model's decisions are transparent and interpretable. This transparency is crucial for validating the model's accuracy and for gaining mechanistic insights into proplatelet production.",
  "model/output": "The model developed in this study is a classification model. It is designed to accurately identify and segment different stages of megakaryocyte (MK) maturation, specifically distinguishing between round MKs and proplatelet-forming MKs. The model uses supervised machine learning algorithms to generate probability maps of cellular features, which are then processed to identify and classify these structures.\n\nThe classification process involves two main stages. First, ilastik is used for pixel-level classification, where pixels are categorized into different classes such as background, cell boundary, MK, and proplatelet. This step generates probability maps that highlight the presence and location of these features within the images. Second, CellProfiler Analyst is employed for object-level classification, where the segmented images undergo further training to create machine learning rules for identifying proplatelet structures. This stage involves expert annotation of cells to improve the recognition of complex proplatelet formations.\n\nThe output of the model includes segmented and overlaid images that allow for the monitoring of object classification accuracy throughout the analysis stages. The model's performance is quantitatively validated by comparing its predictions to manual annotations by independent experts. The accuracy of the model is found to be within the range of human variability, demonstrating its reliability in distinguishing between different stages of MK maturation.\n\nThe model's output also includes confusion matrices that show the percentages of predicted versus true labels, providing a visual representation of the model's classification performance. Additionally, the model generates tabulated information of statistical features of each skeletonized proplatelet object, allowing for the quantitation of proplatelet lengths and in-depth visualization of spatial distributions over the differentiation timeline.\n\nOverall, the model's output is designed to provide accurate and detailed information about the stages of MK maturation, enabling researchers to monitor and analyze proplatelet formation with high precision. The use of open-source software and automated workflows ensures that the model is user-friendly, unbiased, and capable of high-content output, making it a valuable tool for studying MK and proplatelet production in live-cell label-free culture systems.",
  "model/duration": "Not enough information is available.",
  "model/availability": "The source code for the analysis pipeline is publicly available. It can be accessed via a GitHub repository. The repository contains the necessary Python code, ilastik files, and CellProfiler pipelines required to run the algorithm. This open-source approach allows for transparency and reproducibility of the results. The specific details and instructions for accessing and using the code are provided in the repository. The availability of these resources enables other researchers to implement and validate the method in their own studies, fostering collaboration and further development in the field.",
  "evaluation/method": "The evaluation of our method involved several rigorous steps to ensure its accuracy and reliability. Initially, we validated the machine learning algorithms internally within CellProfiler. This process involved binning events as either positive (proplatelet-forming) or negative (non-proplatelet-forming megakaryocytes) and then manually classifying 200 cells. These manual classifications were compared to the predictions made by CellProfiler, demonstrating an accuracy of approximately 70-80% when compared to annotations by two independent, blinded experts. This level of accuracy is notable as it aligns with the variability observed among human annotators, indicating that our workflow performs within the range of human capability.\n\nTo further validate our approach, we compared it against traditional rule-based image analysis methods using a previously developed ImageJ macro and manual counting, which is currently the gold standard for proplatelet analysis. Mature murine megakaryocytes were treated with puromycin, a known inhibitor of proplatelet production, and imaged over 24 hours. The images were then quantified using our new analysis pipeline, the ImageJ macro, and manual counting by three independent, blinded experts. The results showed that our machine-learning-based pipeline matched the manual counts of percent proplatelet production most closely, indicating higher accuracy than the ImageJ macro, which relies on circularity and size exclusion rules.\n\nAdditionally, we evaluated the method using human CD34+ cell-derived megakaryocytes, which present unique challenges due to their smaller size and fewer, less elaborate proplatelet extensions. We created a separate pipeline specifically trained on human megakaryocytes, achieving a similar degree of accuracy to the murine system. The analysis estimated a comparable percentage of proplatelet-producing megakaryocytes as the ImageJ method, but when area parameters were considered, CellProfiler provided a more accurate reflection of the true number of human proplatelet structures. This further supports the use of shape and area metrics for analyzing proplatelet formation from human megakaryocytes.\n\nOverall, the evaluation involved a combination of internal validation, comparison with established methods, and application to different cell types, ensuring a comprehensive assessment of the method's accuracy and reliability.",
  "evaluation/measure": "In our evaluation of the supervised machine learning pipeline for proplatelet quantification, we focused on several key performance metrics to ensure the robustness and accuracy of our approach.\n\nFirstly, we assessed the accuracy of our pipeline in distinguishing between proplatelet-forming and non-proplatelet-forming megakaryocytes (MKs). This was done by comparing the pipeline's predictions to manual annotations by two independent experts. The accuracy ranged from 70% to 80%, which is within the range of human variability, indicating that our workflow is reliable and consistent with expert judgment.\n\nWe also validated our pipeline against traditional rule-based image analysis methods, such as those using ImageJ macros, and manual counting. The machine-learning based pipeline matched manual counts of percent proplatelet production most closely, suggesting higher accuracy than traditional methods. This is particularly important because traditional methods often struggle with accurately segmenting whole proplatelet objects, leading to overestimations.\n\nIn addition to percentage metrics, we generated and analyzed other values such as the total area of MKs and proplatelets per image. These metrics provide more detailed insights into the structures being analyzed. For instance, our pipeline estimated the area of proplatelets more accurately than traditional methods, which is crucial for understanding the morphological changes during proplatelet production.\n\nFor human MKs, which have distinct morphological characteristics compared to murine MKs, we created a separate pipeline tailored to human data. This pipeline also demonstrated high accuracy, comparable to the murine system. The area parameters, in particular, were more relevant for analyzing human proplatelet formation, as they reflected the true small number of human proplatelet structures more accurately than traditional methods.\n\nFurthermore, we developed a skeletonization pipeline to allow high-content analysis of proplatelet structures. This pipeline provides detailed metrics such as the length of proplatelet segments, the number of branches, and other morphological features. These metrics are essential for understanding the complexity and biological significance of different proplatelet morphologies.\n\nOverall, the set of metrics we reported is comprehensive and representative of the current literature on proplatelet quantification. By including both percentage and area metrics, as well as detailed morphological features, we ensure that our evaluation is thorough and provides valuable insights into proplatelet production.",
  "evaluation/comparison": "In our evaluation, we conducted a thorough comparison of our supervised machine learning approach with existing methods to quantify proplatelet production. We benchmarked our platform against two alternative methods: a traditional rule-based image analysis using a previously developed ImageJ macro and manual counting, which is currently considered the gold standard.\n\nFor the comparison, we used live-cell imaging of fetal-liver derived mouse megakaryocytes over a 24-hour period, capturing the dynamic process of proplatelet formation. The results showed that both our CellProfiler-based approach and manual counting yielded similar trends in proplatelet object quantification, with a comparable degree of variation. However, the ImageJ macro produced inflated estimates of proplatelet objects and exhibited a higher degree of variation.\n\nWe also compared the area measurements of megakaryocyte and proplatelet objects between CellProfiler and ImageJ. The data indicated that ImageJ tended to overestimate the megakaryocyte area, suggesting that CellProfiler might more accurately segment single cells.\n\nAdditionally, we validated our platform using human CD34+ derived megakaryocytes, which present unique challenges due to their smaller proplatelet branches. The comparison with ImageJ and manual counting showed consistent results, further demonstrating the robustness and accuracy of our approach.\n\nThese comparisons highlight the improved accuracy and reliability of our supervised machine learning platform for proplatelet quantification, making it a valuable tool for both research and clinical applications.",
  "evaluation/confidence": "The evaluation of our machine learning algorithms involved several steps to ensure confidence in the results. We utilized confusion matrices generated from two independent expert annotators to assess the accuracy of our segmentation and classification tasks. These matrices provided a clear visualization of the true positive, true negative, false positive, and false negative rates, allowing us to quantify the performance of our models.\n\nTo validate the internal consistency of our algorithms, we performed internal validation within CellProfiler. We manually classified and annotated 200 cells and compared these annotations to the predictions made by CellProfiler. This step was crucial in ensuring that our models were not overfitting to the training data and could generalize well to new, unseen data.\n\nStatistical significance was assessed through comparative analysis with existing methods, such as ImageJ and manual counting. We conducted experiments with fetal-liver derived mouse megakaryocytes and human CD34+ derived megakaryocytes, imaging them over a period of 24 hours. The results showed that our machine learning approach provided more accurate quantitation of proplatelet production compared to ImageJ, which tended to overestimate the number of proplatelet objects and exhibited a higher degree of variation.\n\nIn addition to percentage metrics, we also analyzed area and shape metrics, which are particularly relevant for human proplatelet production. These metrics provided a more detailed understanding of the structures being analyzed and helped to mitigate the challenges posed by the complex morphological variations in megakaryocyte shapes and proplatelet structures.\n\nOverall, the performance metrics included mean and standard deviation values from multiple independent experiments, providing a robust measure of the algorithms' accuracy and reliability. The statistical significance of our results supports the claim that our supervised machine learning approach offers improved accuracy and flexibility compared to traditional image analysis methods.",
  "evaluation/availability": "The raw evaluation files, including the phase images exported as 8-bit tiff stacks, are not publicly available. However, the code, ilastik files, and CellProfiler pipelines used for the analysis are accessible on GitHub at the following link: https://github.com/broadinstitute/Italiano_MK_Analysis. This repository provides the necessary tools for others to replicate and build upon the analysis pipeline described in the publication. The availability of these resources promotes transparency and facilitates further research in the field."
}